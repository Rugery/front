<p-toast />
<p-toolbar class="mb-2"
  ><p-button label="Nuevo Módulo" icon="pi pi-plus" (click)="showDialog()"></p-button>
</p-toolbar>
<p-table [value]="modules()" [paginator]="true" [rows]="10" [responsiveLayout]="'scroll'">
  <ng-template pTemplate="header">
    <tr>
      <th>Título</th>
      <th>Descripción</th>
      <th></th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-module>
    <tr>
      <td>{{ module.title }}</td>
      <td>{{ module.description }}</td>
      <td>
        <p-button
          icon="pi pi-pencil"
          class="mr-2"
          [rounded]="true"
          [outlined]="true"
          (click)="editModule(module)"
        />
        <p-button
          icon="pi pi-trash"
          class="mr-2"
          severity="danger"
          [rounded]="true"
          [outlined]="true"
          (click)="deleteModule(module)"
        />
      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog
  header="{{ editingModule() ? 'Editar Módulo' : 'Nuevo Módulo' }}"
  [(visible)]="displayDialog"
  [modal]="true"
  [closable]="true"
  [style]="{ width: '600px' }"
  (onHide)="hideDialog()"
>
  <form [formGroup]="moduleForm" class="p-fluid p-formgrid p-grid" style="gap: 1rem">
    <div class="p-field p-col-12 p-md-12 flex items-center">
      <label for="title" class="w-1/4 font-semibold">Título</label>
      <input id="title" type="text" pInputText formControlName="title" class="w-3/4" />
    </div>

    <div class="p-field p-col-12 p-md-12 flex items-center">
      <label for="description" class="w-1/4 font-semibold">Descripción</label>
      <input id="description" type="text" pInputText formControlName="description" class="w-3/4" />
    </div>
  </form>

  <ng-template #footer>
    <p-button label="Cancelar" icon="pi pi-times" class="p-button-text" (click)="hideDialog()" />
    <p-button label="Guardar" icon="pi pi-check" (click)="saveModule()" />
  </ng-template>
</p-dialog>
<p-confirmDialog />
